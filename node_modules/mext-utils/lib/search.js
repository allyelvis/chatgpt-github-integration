'use strict';

Object.defineProperty(exports, '__esModule', {
  value: true
});
/* eslint-disable no-param-reassign */

const search = () => {
  let _search;

  if (process.env.ROUTER === 'hash') {
    let { hash } = window.location;
    hash = hash.replace('#', '');
    _search = hash.split('?')[1] || '';
  } else {
    _search = window.location.search.substr(1);
  }

  return _search;
};

exports.default = search;

function decode(input) {
  try {
    return decodeURIComponent(input.replace(/\+/g, ' '));
  } catch (e) {
    return '';
  }
}

exports.queryObj = (searchInfo = null) => {
  const query = {};

  if (searchInfo === null) {
    searchInfo = search();
  }

  if (searchInfo) {
    searchInfo.split('&').forEach(item => {
      const itemArr = item.split('=');
      query[itemArr[0]] = decode(itemArr[1]);
    });
  }

  return query;
};
