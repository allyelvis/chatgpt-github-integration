'use strict';
/**
 * 处理重定向逻辑
 */

Object.defineProperty(exports, '__esModule', {
  value: true
});

const redirect_1 = require('../../utils/redirect');

function redirect() {
  return async (ctx, next) => {
    const redirect = await redirect_1.default(
      ctx.targetMatchRoutes,
      ctx.targetMatchRoutesLength,
      ctx.targetLocation.pathname
    );

    if (redirect) {
      this.history.push(redirect);
      return ctx.cb(false);
    }

    await next();
  };
}

exports.default = redirect;
